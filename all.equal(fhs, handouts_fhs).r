# https://github.com/mkim0710/PH207x


library(tidyverse)
handouts_fhs = readRDS(url("https://github.com/mkim0710/PH207x/blob/master/handouts_fhs.rds?raw=true"))
handouts_fhs %>% str
# > handouts_fhs %>% str
# 'data.frame':	4434 obs. of  74 variables:
#  $ randid   : int  2448 6238 9428 10552 11252 11263 12629 12806 14367 16365 ...
#  $ death    : Factor w/ 2 levels "No","Yes": 1 1 1 2 1 1 1 1 1 1 ...
#  $ angina   : Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 2 1 1 1 ...
#  $ hospmi   : Factor w/ 2 levels "No","Yes": 2 1 1 1 1 1 1 1 1 1 ...
#  $ mi_fchd  : Factor w/ 2 levels "No","Yes": 2 1 1 1 1 2 1 1 1 1 ...
#  $ anychd   : Factor w/ 2 levels "No","Yes": 2 1 1 1 1 2 2 1 1 1 ...
#  $ stroke   : Factor w/ 2 levels "No","Yes": 1 1 1 2 1 1 1 1 1 1 ...
#  $ cvd      : Factor w/ 2 levels "No","Yes": 2 1 1 2 1 2 1 1 1 1 ...
#  $ hyperten : Factor w/ 2 levels "No","Yes": 1 1 1 2 2 2 2 2 2 2 ...
#  $ timeap   : num  24 24 24 8.09 24 ...
#  $ timemi   : num  17.63 24 24 8.09 24 ...
#  $ timemifc : num  17.63 24 24 8.09 24 ...
#  $ timechd  : num  17.63 24 24 8.09 24 ...
#  $ timestrk : num  24 24 24 5.72 24 ...
#  $ timecvd  : num  17.63 24 24 5.72 24 ...
#  $ timedth  : num  24 24 24 8.09 24 ...
#  $ timehyp  : num  24 24 24 0 11.7 ...
#  $ sex1     : Factor w/ 2 levels "Male","Female": 1 2 1 2 2 2 2 2 1 1 ...
#  $ totchol1 : int  195 250 245 225 285 228 205 313 260 225 ...
#  $ age1     : int  39 46 48 61 46 43 63 45 52 43 ...
#  $ sysbp1   : num  106 121 128 150 130 ...
#  $ diabp1   : num  70 81 80 95 84 110 71 71 89 107 ...
#  $ cursmoke1: Factor w/ 2 levels "No","Yes": 1 1 2 2 2 1 1 2 1 2 ...
#  $ cigpday1 : int  0 0 20 30 23 0 0 20 0 30 ...
#  $ bmi1     : num  27 28.7 25.3 28.6 23.1 ...
#  $ diabetes1: Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
#  $ bpmeds1  : Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
#  $ heartrte1: int  80 95 75 65 85 77 60 79 76 93 ...
#  $ glucose1 : int  77 76 70 103 85 99 85 78 79 88 ...
#  $ prevchd1 : Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
#  $ prevap1  : Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
#  $ prevmi1  : Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
#  $ prevstrk1: Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
#  $ prevhyp1 : Factor w/ 2 levels "No","Yes": 1 1 1 2 1 2 1 1 2 2 ...
#  $ hdlc1    : int  NA NA NA NA NA NA NA NA NA NA ...
#  $ ldlc1    : int  NA NA NA NA NA NA NA NA NA NA ...
#  $ sex2     : Factor w/ 2 levels "Male","Female": NA 2 1 2 2 2 2 2 1 1 ...
#  $ totchol2 : int  NA 260 283 232 343 230 220 NA 292 258 ...
#  $ age2     : int  NA 52 54 67 51 49 70 51 58 49 ...
#  $ sysbp2   : num  NA 105 141 183 109 ...
#  $ diabp2   : num  NA 69.5 89 109 77 102 81 72.5 90 102 ...
#  $ cursmoke2: Factor w/ 2 levels "No","Yes": NA 1 2 2 2 1 1 2 1 1 ...
#  $ cigpday2 : int  NA 0 30 20 30 0 0 30 0 0 ...
#  $ bmi2     : num  NA 29.4 25.3 30.2 23.5 ...
#  $ diabetes2: Factor w/ 2 levels "No","Yes": NA 1 1 1 1 1 1 1 1 1 ...
#  $ bpmeds2  : Factor w/ 2 levels "No","Yes": NA 1 1 1 1 2 1 1 1 2 ...
#  $ heartrte2: int  NA 80 75 60 90 120 80 75 85 75 ...
#  $ glucose2 : int  NA 86 87 89 72 86 98 NA 81 74 ...
#  $ prevchd2 : Factor w/ 2 levels "No","Yes": NA 1 1 1 1 1 2 1 1 1 ...
#  $ prevap2  : Factor w/ 2 levels "No","Yes": NA 1 1 1 1 1 2 1 1 1 ...
#  $ prevmi2  : Factor w/ 2 levels "No","Yes": NA 1 1 1 1 1 1 1 1 1 ...
#  $ prevstrk2: Factor w/ 2 levels "No","Yes": NA 1 1 1 1 1 1 1 1 1 ...
#  $ prevhyp2 : Factor w/ 2 levels "No","Yes": NA 1 1 2 1 2 2 1 2 2 ...
#  $ hdlc2    : int  NA NA NA NA NA NA NA NA NA NA ...
#  $ ldlc2    : int  NA NA NA NA NA NA NA NA NA NA ...
#  $ sex3     : Factor w/ 2 levels "Male","Female": 1 2 NA NA 2 2 NA 2 1 1 ...
#  $ totchol3 : int  209 237 NA NA NA 220 NA 320 280 211 ...
#  $ age3     : int  52 58 NA NA 58 55 NA 57 64 55 ...
#  $ sysbp3   : num  121 108 NA NA 155 180 NA 110 168 173 ...
#  $ diabp3   : num  66 66 NA NA 90 106 NA 46 100 123 ...
#  $ cursmoke3: Factor w/ 2 levels "No","Yes": 1 1 NA NA 2 1 NA 2 1 1 ...
#  $ cigpday3 : int  0 0 NA NA 30 0 NA 30 0 0 ...
#  $ bmi3     : num  NA 28.5 NA NA 24.6 ...
#  $ diabetes3: Factor w/ 2 levels "No","Yes": 1 1 NA NA 1 2 NA 1 1 1 ...
#  $ bpmeds3  : Factor w/ 2 levels "No","Yes": 1 1 NA NA 1 2 NA 1 1 2 ...
#  $ heartrte3: int  69 80 NA NA 74 86 NA 75 92 75 ...
#  $ glucose3 : int  92 71 NA NA NA 81 NA 87 82 85 ...
#  $ prevchd3 : Factor w/ 2 levels "No","Yes": 1 1 NA NA 1 1 NA 1 1 1 ...
#  $ prevap3  : Factor w/ 2 levels "No","Yes": 1 1 NA NA 1 1 NA 1 1 1 ...
#  $ prevmi3  : Factor w/ 2 levels "No","Yes": 1 1 NA NA 1 1 NA 1 1 1 ...
#  $ prevstrk3: Factor w/ 2 levels "No","Yes": 1 1 NA NA 1 1 NA 1 1 1 ...
#  $ prevhyp3 : Factor w/ 2 levels "No","Yes": 1 1 NA NA 2 2 NA 1 2 2 ...
#  $ hdlc3    : int  31 54 NA NA NA 46 NA 34 44 48 ...
#  $ ldlc3    : int  178 141 NA NA NA 135 NA 286 236 163 ...
#  - attr(*, "datalabel")= chr ""
#  - attr(*, "time.stamp")= chr "30 Aug 2012 14:39"
#  - attr(*, "formats")= chr  "%12.0g" "%12.0g" "%12.0g" "%12.0g" ...
#  - attr(*, "types")= int  253 251 251 251 251 251 251 251 251 255 ...
#  - attr(*, "val.labels")= chr  "" "yesno" "yesno" "yesno" ...
#  - attr(*, "var.labels")= chr  "Random ID" "Death indicator" "Incident Angina Pectoris" "Incident Hospitalized MI" ...
#  - attr(*, "version")= int 12
#  - attr(*, "label.table")=List of 2
#   ..$ mf   : Named int  1 2
#   .. ..- attr(*, "names")= chr  "Male" "Female"
#   ..$ yesno: Named int  0 1
#   .. ..- attr(*, "names")= chr  "No" "Yes"


# write_csv(handouts_fhs, "handouts_fhs.csv")
# openxlsx::write.xlsx(handouts_fhs, "handouts_fhs.xlsx", asTable = T)


dataset = handouts_fhs
glm(death ~ cursmoke1 + obese1 + diabetes1 + male1 + age1 + sysbp1, data = dataset)
# > glm(death ~ cursmoke1 + obese1 + diabetes1 + male1 + age1 + sysbp1, data = dataset)
# Error in eval(predvars, data, env) : object 'obese1' not found


#@ fhs <- read_dta(url("https://github.com/mkim0710/PH207x/blob/master/fhs.dta?raw=true")) =====

# library(haven)
# fhs <- read_dta(url("https://github.com/mkim0710/PH207x/blob/master/fhs.dta?raw=true"))
# fhs
# saveRDS(fhs, "fhs.rds")
# write.csv(fhs, "fhs.csv")
# openxlsx::write.xlsx(fhs, "fhs.xlsx", asTable = T)


#@ fhs <- readRDS(url("https://github.com/mkim0710/PH207x/blob/master/fhs.rds?raw=true")) =====
fhs <- readRDS(url("https://github.com/mkim0710/PH207x/blob/master/fhs.rds?raw=true"))

fhs %>% str(give.attr = F) #----
# > fhs %>% str(give.attr = F )
# Classes ‘tbl_df’, ‘tbl’ and 'data.frame':	4434 obs. of  80 variables:
#  $ randid   : num  2448 6238 9428 10552 11252 ...
#  $ death    : num  0 0 0 1 0 0 0 0 0 0 ...
#  $ angina   : num  0 0 0 0 0 0 1 0 0 0 ...
#  $ hospmi   : num  1 0 0 0 0 0 0 0 0 0 ...
#  $ mi_fchd  : num  1 0 0 0 0 1 0 0 0 0 ...
#  $ anychd   : num  1 0 0 0 0 1 1 0 0 0 ...
#  $ stroke   : num  0 0 0 1 0 0 0 0 0 0 ...
#  $ cvd      : num  1 0 0 1 0 1 0 0 0 0 ...
#  $ hyperten : num  0 0 0 1 1 1 1 1 1 1 ...
#  $ timeap   : num  24 24 24 8.09 24 ...
#  $ timemi   : num  17.63 24 24 8.09 24 ...
#  $ timemifc : num  17.63 24 24 8.09 24 ...
#  $ timechd  : num  17.63 24 24 8.09 24 ...
#  $ timestrk : num  24 24 24 5.72 24 ...
#  $ timecvd  : num  17.63 24 24 5.72 24 ...
#  $ timedth  : num  24 24 24 8.09 24 ...
#  $ timehyp  : num  24 24 24 0 11.7 ...
#  $ sex1     : num  1 2 1 2 2 2 2 2 1 1 ...
#  $ time1    : num  0 0 0 0 0 0 0 0 0 0 ...
#  $ age1     : num  39 46 48 61 46 43 63 45 52 43 ...
#  $ sysbp1   : num  106 121 128 150 130 ...
#  $ diabp1   : num  70 81 80 95 84 110 71 71 89 107 ...
#  $ bpmeds1  : num  0 0 0 0 0 0 0 0 0 0 ...
#  $ cursmoke1: num  0 0 1 1 1 0 0 1 0 1 ...
#  $ cigpday1 : num  0 0 20 30 23 0 0 20 0 30 ...
#  $ educ1    : num  4 2 1 3 3 2 1 2 1 1 ...
#  $ totchol1 : num  195 250 245 225 285 228 205 313 260 225 ...
#  $ hdlc1    : num  NA NA NA NA NA NA NA NA NA NA ...
#  $ ldlc1    : num  NA NA NA NA NA NA NA NA NA NA ...
#  $ bmi1     : num  27 28.7 25.3 28.6 23.1 ...
#  $ glucose1 : num  77 76 70 103 85 99 85 78 79 88 ...
#  $ diabetes1: num  0 0 0 0 0 0 0 0 0 0 ...
#  $ heartrte1: num  80 95 75 65 85 77 60 79 76 93 ...
#  $ prevap1  : num  0 0 0 0 0 0 0 0 0 0 ...
#  $ prevchd1 : num  0 0 0 0 0 0 0 0 0 0 ...
#  $ prevmi1  : num  0 0 0 0 0 0 0 0 0 0 ...
#  $ prevstrk1: num  0 0 0 0 0 0 0 0 0 0 ...
#  $ prevhyp1 : num  0 0 0 1 0 1 0 0 1 1 ...
#  $ sex2     : num  NA 2 1 2 2 2 2 2 1 1 ...
#  $ time2    : num  NA 2156 2199 1977 2072 ...
#  $ age2     : num  NA 52 54 67 51 49 70 51 58 49 ...
#  $ sysbp2   : num  NA 105 141 183 109 ...
#  $ diabp2   : num  NA 69.5 89 109 77 102 81 72.5 90 102 ...
#  $ bpmeds2  : num  NA 0 0 0 0 1 0 0 0 1 ...
#  $ cursmoke2: num  NA 0 1 1 1 0 0 1 0 0 ...
#  $ cigpday2 : num  NA 0 30 20 30 0 0 30 0 0 ...
#  $ educ2    : num  NA 2 1 3 3 2 1 2 1 1 ...
#  $ totchol2 : num  NA 260 283 232 343 230 220 NA 292 258 ...
#  $ hdlc2    : num  NA NA NA NA NA NA NA NA NA NA ...
#  $ ldlc2    : num  NA NA NA NA NA NA NA NA NA NA ...
#  $ bmi2     : num  NA 29.4 25.3 30.2 23.5 ...
#  $ glucose2 : num  NA 86 87 89 72 86 98 NA 81 74 ...
#  $ diabetes2: num  NA 0 0 0 0 0 0 0 0 0 ...
#  $ heartrte2: num  NA 80 75 60 90 120 80 75 85 75 ...
#  $ prevap2  : num  NA 0 0 0 0 0 1 0 0 0 ...
#  $ prevchd2 : num  NA 0 0 0 0 0 1 0 0 0 ...
#  $ prevmi2  : num  NA 0 0 0 0 0 0 0 0 0 ...
#  $ prevstrk2: num  NA 0 0 0 0 0 0 0 0 0 ...
#  $ prevhyp2 : num  NA 0 0 1 0 1 1 0 1 1 ...
#  $ sex3     : num  1 2 NA NA 2 2 NA 2 1 1 ...
#  $ time3    : num  4628 4344 NA NA 4285 ...
#  $ age3     : num  52 58 NA NA 58 55 NA 57 64 55 ...
#  $ sysbp3   : num  121 108 NA NA 155 180 NA 110 168 173 ...
#  $ diabp3   : num  66 66 NA NA 90 106 NA 46 100 123 ...
#  $ bpmeds3  : num  0 0 NA NA 0 1 NA 0 0 1 ...
#  $ cursmoke3: num  0 0 NA NA 1 0 NA 1 0 0 ...
#  $ cigpday3 : num  0 0 NA NA 30 0 NA 30 0 0 ...
#  $ educ3    : num  4 2 NA NA 3 2 NA 2 1 1 ...
#  $ totchol3 : num  209 237 NA NA NA 220 NA 320 280 211 ...
#  $ hdlc3    : num  31 54 NA NA NA 46 NA 34 44 48 ...
#  $ ldlc3    : num  178 141 NA NA NA 135 NA 286 236 163 ...
#  $ bmi3     : num  NA 28.5 NA NA 24.6 ...
#  $ glucose3 : num  92 71 NA NA NA 81 NA 87 82 85 ...
#  $ diabetes3: num  0 0 NA NA 0 1 NA 0 0 0 ...
#  $ heartrte3: num  69 80 NA NA 74 86 NA 75 92 75 ...
#  $ prevap3  : num  0 0 NA NA 0 0 NA 0 0 0 ...
#  $ prevchd3 : num  0 0 NA NA 0 0 NA 0 0 0 ...
#  $ prevmi3  : num  0 0 NA NA 0 0 NA 0 0 0 ...
#  $ prevstrk3: num  0 0 NA NA 0 0 NA 0 0 0 ...
#  $ prevhyp3 : num  0 0 NA NA 1 1 NA 0 1 1 ...

all.equal(fhs, handouts_fhs) #----
all.equal(handouts_fhs, fhs) #----
# > all.equal(fhs, handouts_fhs) #----
# [1] "Cols in x but not y: `time2`, `time3`, `educ1`, `educ2`, `time1`, `educ3`. "
# > all.equal(handouts_fhs, fhs) #----
#   [1] "Names: 52 string mismatches"                                          
#   [2] "Attributes: < Names: 1 string mismatch >"                             
#   [3] "Attributes: < Length mismatch: comparison on first 2 components >"    
#   [4] "Attributes: < Component “class”: 1 string mismatch >"                 
#   [5] "Attributes: < Component 2: Modes: character, numeric >"               
#   [6] "Attributes: < Component 2: target is character, current is numeric >" 
#   [7] "Length mismatch: comparison on first 74 components"                   
#   [8] "Component “randid”: Attributes: < target is NULL, current is list >"  
#   [9] "Component “death”: 'current' is not a factor"                         
#  [10] "Component “angina”: 'current' is not a factor"                        
#  [11] "Component “hospmi”: 'current' is not a factor"                        
#  [12] "Component “mi_fchd”: 'current' is not a factor"                       
#  [13] "Component “anychd”: 'current' is not a factor"                        
#  [14] "Component “stroke”: 'current' is not a factor"                        
#  [15] "Component “cvd”: 'current' is not a factor"                           
#  [16] "Component “hyperten”: 'current' is not a factor"                      
#  [17] "Component “timeap”: Attributes: < target is NULL, current is list >"  
#  [18] "Component “timemi”: Attributes: < target is NULL, current is list >"  
#  [19] "Component “timemifc”: Attributes: < target is NULL, current is list >"
#  [20] "Component “timechd”: Attributes: < target is NULL, current is list >" 
#  [21] "Component “timestrk”: Attributes: < target is NULL, current is list >"
#  [22] "Component “timecvd”: Attributes: < target is NULL, current is list >" 
#  [23] "Component “timecvd”: Mean relative difference: 2.206258e-08"          
#  [24] "Component “timedth”: Attributes: < target is NULL, current is list >" 
#  [25] "Component “timehyp”: Attributes: < target is NULL, current is list >" 
#  [26] "Component “sex1”: 'current' is not a factor"                          
#  [27] "Component 19: Attributes: < target is NULL, current is list >"        
#  [28] "Component 19: 'is.NA' value mismatch: 0 in current 52 in target"      
#  [29] "Component “age1”: Attributes: < target is NULL, current is list >"    
#  [30] "Component “sysbp1”: Attributes: < target is NULL, current is list >"  
#  [31] "Component “diabp1”: Attributes: < target is NULL, current is list >"  
#  [32] "Component 23: 'current' is not a factor"                              
#  [33] "Component 24: Attributes: < target is NULL, current is list >"        
#  [34] "Component 24: 'is.NA' value mismatch: 0 in current 32 in target"      
#  [35] "Component 25: Attributes: < target is NULL, current is list >"        
#  [36] "Component 25: 'is.NA' value mismatch: 32 in current 19 in target"     
#  [37] "Component 26: 'current' is not a factor"                              
#  [38] "Component 27: 'current' is not a factor"                              
#  [39] "Component 28: Attributes: < target is NULL, current is list >"        
#  [40] "Component 28: 'is.NA' value mismatch: 4434 in current 1 in target"    
#  [41] "Component 29: Attributes: < target is NULL, current is list >"        
#  [42] "Component 29: 'is.NA' value mismatch: 4434 in current 397 in target"  
#  [43] "Component 30: 'current' is not a factor"                              
#  [44] "Component 31: 'current' is not a factor"                              
#  [45] "Component 32: 'current' is not a factor"                              
#  [46] "Component 33: 'current' is not a factor"                              
#  [47] "Component 34: 'current' is not a factor"                              
#  [48] "Component 35: Attributes: < target is NULL, current is list >"        
#  [49] "Component 35: 'is.NA' value mismatch: 0 in current 4434 in target"    
#  [50] "Component 36: Attributes: < target is NULL, current is list >"        
#  [51] "Component 36: 'is.NA' value mismatch: 0 in current 4434 in target"    
#  [52] "Component 37: 'current' is not a factor"                              
#  [53] "Component 38: Attributes: < target is NULL, current is list >"        
#  [54] "Component 38: 'is.NA' value mismatch: 0 in current 647 in target"     
#  [55] "Component 39: Attributes: < target is NULL, current is list >"        
#  [56] "Component 39: Mean relative difference: 0.9716771"                    
#  [57] "Component 40: Attributes: < target is NULL, current is list >"        
#  [58] "Component 40: Mean relative difference: 14.88291"                     
#  [59] "Component 41: Attributes: < target is NULL, current is list >"        
#  [60] "Component 41: Mean relative difference: 0.343346"                     
#  [61] "Component 42: 'current' is not a factor"                              
#  [62] "Component 43: Attributes: < target is NULL, current is list >"        
#  [63] "Component 43: 'is.NA' value mismatch: 504 in current 537 in target"   
#  [64] "Component 44: Attributes: < target is NULL, current is list >"        
#  [65] "Component 44: 'is.NA' value mismatch: 590 in current 520 in target"   
#  [66] "Component 45: 'current' is not a factor"                              
#  [67] "Component 46: 'current' is not a factor"                              
#  [68] "Component 47: Attributes: < target is NULL, current is list >"        
#  [69] "Component 47: 'is.NA' value mismatch: 604 in current 505 in target"   
#  [70] "Component 48: Attributes: < target is NULL, current is list >"        
#  [71] "Component 48: 'is.NA' value mismatch: 647 in current 985 in target"   
#  [72] "Component 49: 'current' is not a factor"                              
#  [73] "Component 50: 'current' is not a factor"                              
#  [74] "Component 51: 'current' is not a factor"                              
#  [75] "Component 52: 'current' is not a factor"                              
#  [76] "Component 53: 'current' is not a factor"                              
#  [77] "Component 54: Attributes: < target is NULL, current is list >"        
#  [78] "Component 54: 'is.NA' value mismatch: 505 in current 4434 in target"  
#  [79] "Component 55: Attributes: < target is NULL, current is list >"        
#  [80] "Component 55: 'is.NA' value mismatch: 504 in current 4434 in target"  
#  [81] "Component 56: 'current' is not a factor"                              
#  [82] "Component 57: Attributes: < target is NULL, current is list >"        
#  [83] "Component 57: 'is.NA' value mismatch: 504 in current 1385 in target"  
#  [84] "Component 58: Attributes: < target is NULL, current is list >"        
#  [85] "Component 58: 'is.NA' value mismatch: 504 in current 1171 in target"  
#  [86] "Component 59: Attributes: < target is NULL, current is list >"        
#  [87] "Component 59: 'is.NA' value mismatch: 504 in current 1171 in target"  
#  [88] "Component 60: Attributes: < target is NULL, current is list >"        
#  [89] "Component 60: Mean relative difference: 0.9807449"                    
#  [90] "Component 61: 'current' is not a factor"                              
#  [91] "Component 62: Attributes: < target is NULL, current is list >"        
#  [92] "Component 62: 'is.NA' value mismatch: 1171 in current 1185 in target" 
#  [93] "Component 63: Attributes: < target is NULL, current is list >"        
#  [94] "Component 63: 'is.NA' value mismatch: 1171 in current 1188 in target" 
#  [95] "Component 64: 'current' is not a factor"                              
#  [96] "Component “bpmeds3”: 'current' is not a factor"                       
#  [97] "Component 66: Attributes: < target is NULL, current is list >"        
#  [98] "Component 66: 'is.NA' value mismatch: 1171 in current 1175 in target" 
#  [99] "Component 67: Attributes: < target is NULL, current is list >"        
# [100] "Component 67: 'is.NA' value mismatch: 1185 in current 1733 in target" 
# [101] "Component 68: 'current' is not a factor"                              
# [102] "Component 69: 'current' is not a factor"                              
# [103] "Component 70: 'current' is not a factor"                              
# [104] "Component 71: 'current' is not a factor"                              
# [105] "Component 72: 'current' is not a factor"                              
# [106] "Component 73: Attributes: < target is NULL, current is list >"        
# [107] "Component 73: 'is.NA' value mismatch: 1733 in current 1407 in target" 
# [108] "Component 74: Attributes: < target is NULL, current is list >"        
# [109] "Component 74: 'is.NA' value mismatch: 1171 in current 1408 in target"


all.equal(fhs %>% names, handouts_fhs %>% names) #----
setdiff(fhs %>% names, handouts_fhs %>% names) %>% dput #----
setdiff(handouts_fhs %>% names, fhs %>% names) %>% dput #----
# > all.equal(fhs %>% names, handouts_fhs %>% names) #----
# [1] "Lengths (80, 74) differ (string compare on first 74)"
# [2] "52 string mismatches" 
# > setdiff(fhs %>% names, handouts_fhs %>% names) %>% dput #----
# c("time1", "educ1", "time2", "educ2", "time3", "educ3")
# > setdiff(handouts_fhs %>% names, fhs %>% names) %>% dput #----
# character(0)


all.equal(fhs$randid, handouts_fhs$randid) #----
all.equal(fhs$randid %>% as.numeric, handouts_fhs$randid %>% as.numeric) #----
# > all.equal(fhs$randid, handouts_fhs$randid) #----
# [1] "Attributes: < Modes: list, NULL >"                   
# [2] "Attributes: < Lengths: 2, 0 >"                       
# [3] "Attributes: < names for target but not for current >"
# [4] "Attributes: < current is not list-like >
# > all.equal(fhs$randid %>% as.numeric, handouts_fhs$randid %>% as.numeric) #----
# [1] TRUE


#@ ----
dataset = fhs
glm(death ~ cursmoke1 + obese1 + diabetes1 + male1 + age1 + sysbp1, data = dataset)
# > glm(death ~ cursmoke1 + obese1 + diabetes1 + male1 + age1 + sysbp1, data = dataset)
# Error in eval(predvars, data, env) : object 'obese1' not found







#@ end -----
